# Financial Services Convention
# Governance rules for trading and analytics platforms
#
# This convention enforces:
# - Service principal ownership for catalogs
# - Required tags for cost attribution
# - Standardized naming patterns

version: "1.0"
convention: financial_services

# Naming configuration
# Pattern supports: {env}, {team}, {product}, {acronym}, {name}
naming:
  pattern: "{env}_{team}_{product}"
  team: quant
  product: risk_analytics
  separator: "_"

# Ownership rules by securable type
ownership:
  catalog:
    type: SERVICE_PRINCIPAL
    name: spn_trading_platform
    add_environment_suffix: true
  schema:
    type: GROUP
    name: grp_quant_team
    add_environment_suffix: true
  default:
    type: GROUP
    name: grp_quant_team
    add_environment_suffix: true

# Governance rules
rules:
  # Catalogs must be owned by service principals (enforced)
  - rule: catalog_must_have_sp_owner
    mode: enforced

  # No individual user owners (enforced)
  - rule: owner_must_be_sp_or_group
    mode: enforced

  # Required tags for cost attribution (advisory)
  - rule: require_tags
    tags:
      - cost_center
      - team
    mode: advisory

# Default tags applied to all securables
tags:
  cost_center: CC-TRD-4521
  team: quant
  managed_by: brickkit
  compliance: sox

# Environment-specific tag overrides
tag_overrides:
  dev:
    environment: development
    data_classification: internal
  acc:
    environment: acceptance
    data_classification: internal
  prd:
    environment: production
    data_classification: confidential

# Request for Access (RFA) configuration
# Supports inheritance: table → schema → catalog → default
request_for_access:
  # Default RFA for all securables
  default:
    destination: "data-governance@acme-trading.com"
    instructions: "Submit access request via ServiceNow ticket"

  # Catalog-level RFA (overrides default)
  catalog:
    destination: "catalog-admins@acme-trading.com"
    instructions: "Contact catalog administrators for access"

  # Schema inherits from catalog (explicit)
  schema:
    inherit: true

  # Table inherits from schema (explicit)
  table:
    inherit: true
