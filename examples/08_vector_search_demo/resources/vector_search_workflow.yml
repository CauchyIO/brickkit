# Job definition for Vector Search Demo workflow
resources:
  jobs:
    vector_search_demo:
      name: "[${bundle.target}] BrickKit Vector Search Demo"
      description: |
        End-to-end Vector Search deployment with BrickKit governance.
        Creates catalog, schema, table, VS endpoint, and VS index.

      tags:
        team: ${var.team}
        cost_center: ${var.cost_center}
        managed_by: brickkit

      tasks:
        - task_key: deploy_vector_search
          description: Deploy governed Vector Search resources with BrickKit
          notebook_task:
            notebook_path: ../vector_search_demo.ipynb
            base_parameters:
              catalog: ${var.catalog}
              schema: ${var.schema}
              endpoint_name: ${var.vs_endpoint_name}
              environment: ${bundle.target}
              dry_run: "false"
          new_cluster:
            spark_version: 14.3.x-scala2.12
            node_type_id: m5d.large
            num_workers: 0
            spark_conf:
              spark.master: "local[*]"
