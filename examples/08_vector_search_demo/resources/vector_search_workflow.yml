# Job definition for Vector Search Demo workflow
resources:
  jobs:
    vector_search_demo:
      name: "[${bundle.target}] BrickKit Vector Search Demo"
      description: |
        End-to-end Vector Search deployment with BrickKit governance.
        Creates catalog, schema, table, VS endpoint, and VS index.

      tags:
        team: ${var.team}
        cost_center: ${var.cost_center}
        managed_by: brickkit

      tasks:
        - task_key: deploy_vector_search
          description: Deploy governed Vector Search resources with BrickKit
          notebook_task:
            notebook_path: ../vector_search_demo.ipynb
            base_parameters:
              catalog: ${var.catalog}
              schema: ${var.schema}
              endpoint_name: ${var.vs_endpoint_name}
              environment: ${bundle.target}
              dry_run: "false"
          # Use serverless compute (required for this workspace)
          environment_key: default

      environments:
        - environment_key: default
          spec:
            client: "2"
